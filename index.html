<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <title>–í–µ—Å–µ–ª—ñ –±–ª–æ–∫–∏ Blockly –¥–ª—è –¥—ñ—Ç–µ–π</title>
  <script src="https://unpkg.com/blockly/blockly.min.js"></script>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    #blocklyDiv { height: 480px; width: 100%; }
    button { margin-top: 15px; padding: 10px 16px; font-size: 16px; }
    pre { background: #eee; padding: 10px; margin-top: 20px; height: 150px; overflow: auto; }
  </style>
</head>
<body>

  <h1>–í–µ—Å–µ–ª—ñ –±–ª–æ–∫–∏ Blockly –¥–ª—è –¥—ñ—Ç–µ–π</h1>

  <div id="blocklyDiv"></div>

  <xml id="toolbox" style="display: none">
    <category name="–í–ï–°–ï–õ–Ü –î–Ü–á" colour="60">
      <block type="funny_led_on"></block>
      <block type="funny_led_off"></block>
      <block type="funny_colour_led"></block>
      <block type="funny_sound"></block>
    </category>
  </xml>

  <button id="generateCodeBtn">–ü–æ–∫–∞–∑–∞—Ç–∏ –∫–æ–¥</button>

  <pre id="codeOutput"></pre>

  <!-- –°–ø–æ—á–∞—Ç–∫—É –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –±–ª–æ–∫—ñ–≤ -->
  <script>
    Blockly.defineBlocksWithJsonArray([
      {
        "type": "funny_led_on",
        "message0": "üòÅ –ó–ê–°–Ø–ô –Ø–°–ö–†–ê–í–û %1",
        "args0": [
          {
            "type": "field_image",
            "src": "https://img.icons8.com/color/48/000000/light-on.png",
            "width": 32,
            "height": 32,
            "alt": "–õ–∞–º–ø–æ—á–∫–∞"
          }
        ],
        "previousStatement": null,
        "nextStatement": null,
        "colour": 60,
        "tooltip": "–í–º–∏–∫–∞—î –≤–µ—Å–µ–ª—É –ª–∞–º–ø–æ—á–∫—É!",
        "helpUrl": ""
      },
      {
        "type": "funny_led_off",
        "message0": "üõèÔ∏è –¢–ò–•–û –õ–ê–ú–ü–û–ß–ö–ê %1",
        "args0": [
          {
            "type": "field_image",
            "src": "https://img.icons8.com/color/48/000000/light-off.png",
            "width": 32,
            "height": 32,
            "alt": "–ì–∞—Å–∏—Ç–∏ —Å–≤—ñ—Ç–ª–æ"
          }
        ],
        "previousStatement": null,
        "nextStatement": null,
        "colour": 210,
        "tooltip": "–ì–∞—Å–∏—Ç—å –ª–∞–º–ø–æ—á–∫—É",
        "helpUrl": ""
      },
      {
        "type": "funny_colour_led",
        "message0": "üé® –†–û–ó–ú–ê–õ–Æ–ô –õ–ê–ú–ü–û–ß–ö–£ —É %1",
        "args0": [
          {
            "type": "field_colour",
            "name": "COLOR",
            "colour": "#ff00ff"
          }
        ],
        "previousStatement": null,
        "nextStatement": null,
        "colour": 330,
        "tooltip": "–õ–∞–º–ø–æ—á–∫–∞ –∑–º—ñ–Ω–∏—Ç—å –∫–æ–ª—ñ—Ä!",
        "helpUrl": ""
      },
      {
        "type": "funny_sound",
        "message0": "üéµ –ü–ê–ó–í–£–ß–ò –∑–≤—É–∫ %1",
        "args0": [
          {
            "type": "field_dropdown",
            "name": "SOUND",
            "options": [
              ["–ë—ñ–ø", "BEEP"],
              ["–õ—è", "LA"],
              ["–ë—É–º", "BOOM"],
              ["–î—ñ–Ω—å", "DING"]
            ]
          }
        ],
        "previousStatement": null,
        "nextStatement": null,
        "colour": 90,
        "tooltip": "–ó—ñ–≥—Ä–∞—î –≤–µ—Å–µ–ª–∏–π –∑–≤—É–∫",
        "helpUrl": ""
      }
    ]);
  </script>

  <!-- –ü–æ—Ç—ñ–º –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∏ -->
  <script>
    Blockly.Cpp = Blockly.Cpp || new Blockly.Generator('Cpp');

    Blockly.Cpp['funny_led_on'] = function(block) {
      return 'digitalWrite(2, HIGH);\n';
    };

    Blockly.Cpp['funny_led_off'] = function(block) {
      return 'digitalWrite(2, LOW);\n';
    };

    Blockly.Cpp['funny_colour_led'] = function(block) {
      var color = block.getFieldValue('COLOR');
      return '// –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∫–æ–ª—ñ—Ä LED: ' + color + '\n';
    };

    Blockly.Cpp['funny_sound'] = function(block) {
      var sound = block.getFieldValue('SOUND');
      return '// –í—ñ–¥—Ç–≤–æ—Ä–∏—Ç–∏ –∑–≤—É–∫: ' + sound + '\n';
    };
  </script>

  <!-- –Ü —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è —Ä–æ–±–æ—á–æ—ó –æ–±–ª–∞—Å—Ç—ñ -->
  <script>
    const workspace = Blockly.inject('blocklyDiv', {
      toolbox: document.getElementById('toolbox'),
      scrollbars: true,
      trashcan: true
    });

    document.getElementById('generateCodeBtn').addEventListener('click', () => {
      const code = Blockly.Cpp.workspaceToCode(workspace);
      document.getElementById('codeOutput').textContent = code || '// –ó–±–µ—Ä—ñ—Ç—å –±–ª–æ–∫–∏ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –∫–æ–¥—É';
    });
  </script>

</body>
</html>
